{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import CheckoutSteps from\"../components/CheckoutSteps\";import{createOrder}from'../actions/orderActions';function PlaceOrderScreen(props){var cart=useSelector(function(state){return state.cart;});var orderCreate=useSelector(function(state){return state.orderCreate;});var success=orderCreate.success,order=orderCreate.order;var cartItems=cart.cartItems,shipping=cart.shipping,payment=cart.payment;if(!shipping.address){props.history.push(\"/shipping\");}else if(!payment.paymentMethod){props.history.push(\"/payment\");}var itemsPrice=cartItems.reduce(function(a,c){return a+c.price*c.qty;},0);var shippingPrice=itemsPrice>50?0:5;var totalPrice=itemsPrice+shippingPrice;var dispatch=useDispatch();var placeOrderHandler=function placeOrderHandler(){// create an order\ndispatch(createOrder({orderItems:cartItems,shipping:shipping,payment:payment,itemsPrice:itemsPrice,shippingPrice:shippingPrice,totalPrice:totalPrice}));};useEffect(function(){if(success){props.history.push(\"/order/\"+order._id);}},[success,dispatch,order._id,props.history]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder\"},/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-info\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,cart.shipping.address,\", \",cart.shipping.city,\",\",cart.shipping.postCode,\",\",cart.shipping.country,\",\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Payment\"),/*#__PURE__*/React.createElement(\"div\",null,\"Payment Method: \",cart.payment.paymentMethod)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"cart-list-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Shopping Cart\"),/*#__PURE__*/React.createElement(\"div\",null,\"Price\")),cartItems.lenght===0?/*#__PURE__*/React.createElement(\"div\",null,\"Cart is empty\"):cartItems.map(function(item){return/*#__PURE__*/React.createElement(\"li\",{key:item.name},/*#__PURE__*/React.createElement(\"div\",{className:\"cart-image\"},/*#__PURE__*/React.createElement(\"img\",{src:item.image,alt:\"product\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-name\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\"+item.product},item.name)),/*#__PURE__*/React.createElement(\"div\",null,\"Qty: \",item.qty)),/*#__PURE__*/React.createElement(\"div\",{className:\"cart-price\"},\"\\xA3\",item.price));})))),/*#__PURE__*/React.createElement(\"div\",{className:\"placeorder-action\"},/*#__PURE__*/React.createElement(\"ul\",null,/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"button primary full-width\",onClick:placeOrderHandler},\"Place Order\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Items\"),/*#__PURE__*/React.createElement(\"div\",null,\"\\xA3\",itemsPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"div\",null,\"\\xA3\",shippingPrice)),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Order Total\"),/*#__PURE__*/React.createElement(\"div\",null,\"\\xA3\",totalPrice))))));}export default PlaceOrderScreen;","map":{"version":3,"sources":["C:/Users/bktes/development/eshop/eshop/frontend/src/Screens/PlaceOrderScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Link","CheckoutSteps","createOrder","PlaceOrderScreen","props","cart","state","orderCreate","success","order","cartItems","shipping","payment","address","history","push","paymentMethod","itemsPrice","reduce","a","c","price","qty","shippingPrice","totalPrice","dispatch","placeOrderHandler","orderItems","_id","city","postCode","country","lenght","map","item","name","image","product"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport CheckoutSteps from \"../components/CheckoutSteps\";\r\nimport { createOrder } from '../actions/orderActions';\r\n\r\nfunction PlaceOrderScreen (props) {\r\n\r\n    const cart = useSelector(state => state.cart);\r\n    const orderCreate = useSelector(state => state.orderCreate);\r\n    const { success, order } = orderCreate;\r\n\r\n    const { cartItems, shipping, payment } = cart;\r\n    if (!shipping.address) {\r\n      props.history.push(\"/shipping\");\r\n    } else if (!payment.paymentMethod) {\r\n      props.history.push(\"/payment\");\r\n    }\r\n\r\n    const itemsPrice = cartItems.reduce((a, c) => a + c.price * c.qty, 0);\r\n    const shippingPrice = itemsPrice > 50 ? 0 : 5;\r\n \r\n    const totalPrice = itemsPrice + shippingPrice;\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const placeOrderHandler = () => {\r\n        // create an order\r\n        dispatch(createOrder({\r\n          orderItems: cartItems, shipping, payment, itemsPrice, shippingPrice,\r\n          totalPrice\r\n        }));\r\n      }\r\n      useEffect(() => {\r\n        if (success) {\r\n          props.history.push(\"/order/\" + order._id);\r\n        }\r\n    \r\n      }, [success, dispatch, order._id, props.history]);\r\n\r\n    return <div>\r\n        <CheckoutSteps step1 step2 step3 step4></CheckoutSteps>\r\n        <div className=\"placeorder\">\r\n            <div className=\"placeorder-info\">\r\n                <div>\r\n                    <h3>\r\n                        Shipping\r\n                    </h3>\r\n                    <div>\r\n                        {cart.shipping.address}, {cart.shipping.city},\r\n                        {cart.shipping.postCode},{cart.shipping.country},\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <h3>\r\n                        Payment\r\n                    </h3>\r\n                    <div>\r\n                        Payment Method: {cart.payment.paymentMethod}\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <ul className=\"cart-list-container\">\r\n                        <li>\r\n                            <h3>\r\n                                Shopping Cart\r\n                            </h3>\r\n                            <div>\r\n                                Price\r\n                            </div>\r\n                        </li>\r\n                        {\r\n                            cartItems.lenght === 0 ?\r\n                            <div>\r\n                                Cart is empty\r\n                            </div>\r\n                            :\r\n                            cartItems.map( item =>\r\n                                <li key={item.name}>\r\n                                    <div className=\"cart-image\">\r\n                                        <img src={item.image} alt=\"product\" />\r\n                                    </div>\r\n                                    <div className=\"cart-name\">\r\n                                        <div>\r\n                                            <Link to={\"/product/\" + item.product}>\r\n                                                {item.name}  \r\n                                            </Link>\r\n                                        </div>\r\n                                        <div>\r\n                                            Qty: { item.qty }\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"cart-price\">\r\n                                        £{item.price}\r\n                                    </div>\r\n                                </li>\r\n                            )\r\n                        }\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div className=\"placeorder-action\">\r\n                <ul>\r\n                    <li>\r\n                        <button className=\"button primary full-width\" onClick={placeOrderHandler} >Place Order</button>\r\n                    </li>\r\n                    <li>\r\n                        <h3>Order Summary</h3>\r\n                    </li>\r\n                    <li>\r\n                        <div>Items</div>\r\n                        <div>£{itemsPrice}</div>\r\n                    </li>\r\n                    <li>\r\n                        <div>Shipping</div>\r\n                        <div>£{shippingPrice}</div>\r\n                    </li>\r\n                    <li>\r\n                        <div>Order Total</div>\r\n                        <div>£{totalPrice}</div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    \r\n}\r\n\r\nexport default PlaceOrderScreen;"]},"metadata":{},"sourceType":"module"}