{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\bktes\\\\development\\\\eshop\\\\eshop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\bktes\\\\development\\\\eshop\\\\eshop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\bktes\\\\development\\\\eshop\\\\eshop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import ReactDOM from'react-dom';import axios from'axios';function PaypalButton(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),sdkReady=_useState2[0],setSdkReady=_useState2[1];var addPaypalSdk=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,clientID,script;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/config/paypal\");case 2:result=_context.sent;clientID=result.data;script=document.createElement('script');script.type='text/javascript';script.src='https://www.paypal.com/sdk/js?client-id='+clientID+'&currency=GBP';script.async=true;script.onload=function(){setSdkReady(true);};document.body.appendChild(script);case 10:case\"end\":return _context.stop();}}},_callee);}));return function addPaypalSdk(){return _ref.apply(this,arguments);};}();var _createOrder=function createOrder(data,actions){return actions.order.create({purchase_units:[{amount:{currency_code:'GBP',value:props.amount}}]});};var _onApprove=function onApprove(data,actions){return actions.order.capture().then(function(details){return props.onSuccess(data,details);}).catch(function(err){return console.log(err);});};useEffect(function(){if(!window.paypal){addPaypalSdk();}return function(){//\n};},[]);if(!sdkReady){return/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\");}var Button=window.paypal.Buttons.driver('react',{React:React,ReactDOM:ReactDOM});return/*#__PURE__*/React.createElement(Button,Object.assign({},props,{createOrder:function createOrder(data,actions){return _createOrder(data,actions);},onApprove:function onApprove(data,actions){return _onApprove(data,actions);}}));}export default PaypalButton;","map":{"version":3,"sources":["C:/Users/bktes/development/eshop/eshop/frontend/src/components/PaypalButton.js"],"names":["React","useEffect","useState","ReactDOM","axios","PaypalButton","props","sdkReady","setSdkReady","addPaypalSdk","get","result","clientID","data","script","document","createElement","type","src","async","onload","body","appendChild","createOrder","actions","order","create","purchase_units","amount","currency_code","value","onApprove","capture","then","details","onSuccess","catch","err","console","log","window","paypal","Button","Buttons","driver"],"mappings":"ghBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,WAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,QAASC,CAAAA,YAAT,CAAuBC,KAAvB,CAA8B,eACMJ,QAAQ,CAAC,KAAD,CADd,wCACnBK,QADmB,eACTC,WADS,eAG1B,GAAMC,CAAAA,YAAY,0FAAG,oLACIL,CAAAA,KAAK,CAACM,GAAN,CAAU,oBAAV,CADJ,QACXC,MADW,eAEXC,QAFW,CAEAD,MAAM,CAACE,IAFP,CAGXC,MAHW,CAGFC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAHE,CAIjBF,MAAM,CAACG,IAAP,CAAc,iBAAd,CACAH,MAAM,CAACI,GAAP,CAAa,2CAA6CN,QAA7C,CAAwD,eAArE,CACAE,MAAM,CAACK,KAAP,CAAe,IAAf,CACAL,MAAM,CAACM,MAAP,CAAgB,UAAM,CAClBZ,WAAW,CAAC,IAAD,CAAX,CACH,CAFD,CAGAO,QAAQ,CAACM,IAAT,CAAcC,WAAd,CAA0BR,MAA1B,EAViB,uDAAH,kBAAZL,CAAAA,YAAY,0CAAlB,CAaA,GAAMc,CAAAA,YAAW,CAAG,QAAdA,CAAAA,WAAc,CAACV,IAAD,CAAOW,OAAP,QAAmBA,CAAAA,OAAO,CAACC,KAAR,CAAcC,MAAd,CAAqB,CACxDC,cAAc,CAAC,CACX,CACIC,MAAM,CAAE,CACJC,aAAa,CAAE,KADX,CAEJC,KAAK,CAAExB,KAAK,CAACsB,MAFT,CADZ,CADW,CADyC,CAArB,CAAnB,EAApB,CAWA,GAAMG,CAAAA,UAAS,CAAG,QAAZA,CAAAA,SAAY,CAAClB,IAAD,CAAOW,OAAP,QAAmBA,CAAAA,OAAO,CAACC,KAAR,CAChCO,OADgC,GAEhCC,IAFgC,CAE3B,SAAAC,OAAO,QAAI5B,CAAAA,KAAK,CAAC6B,SAAN,CAAgBtB,IAAhB,CAAsBqB,OAAtB,CAAJ,EAFoB,EAGhCE,KAHgC,CAG1B,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAHuB,CAAnB,EAAlB,CAKApC,SAAS,CAAC,UAAM,CACZ,GAAG,CAACuC,MAAM,CAACC,MAAX,CAAmB,CACfhC,YAAY,GACf,CACD,MAAO,WAAM,CACT;AACH,CAFD,CAGH,CAPQ,CAON,EAPM,CAAT,CASA,GAAG,CAACF,QAAJ,CAAc,CACV,mBAAO,4CAAP,CACH,CAED,GAAMmC,CAAAA,MAAM,CAAGF,MAAM,CAACC,MAAP,CAAcE,OAAd,CAAsBC,MAAtB,CAA6B,OAA7B,CAAsC,CAAE5C,KAAK,CAALA,KAAF,CAASG,QAAQ,CAARA,QAAT,CAAtC,CAAf,CAEA,mBAAO,oBAAC,MAAD,kBAAYG,KAAZ,EAAmB,WAAW,CAAE,qBAACO,IAAD,CAAOW,OAAP,QAAmBD,CAAAA,YAAW,CAACV,IAAD,CAAOW,OAAP,CAA9B,EAAhC,CACP,SAAS,CAAE,mBAACX,IAAD,CAAOW,OAAP,QAAmBO,CAAAA,UAAS,CAAClB,IAAD,CAAOW,OAAP,CAA5B,EADJ,GAAP,CAEH,CAED,cAAenB,CAAAA,YAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport axios from 'axios';\r\n\r\nfunction PaypalButton (props) {\r\n    const [sdkReady, setSdkReady] = useState(false);\r\n\r\n    const addPaypalSdk = async () => {\r\n        const result = await axios.get(\"/api/config/paypal\");\r\n        const clientID = result.data;\r\n        const script = document.createElement('script');\r\n        script.type = 'text/javascript';\r\n        script.src = 'https://www.paypal.com/sdk/js?client-id=' + clientID + '&currency=GBP';\r\n        script.async = true;\r\n        script.onload = () => {\r\n            setSdkReady(true);\r\n        }\r\n        document.body.appendChild(script);\r\n    }\r\n\r\n    const createOrder = (data, actions) => actions.order.create({\r\n        purchase_units:[\r\n            {\r\n                amount: {\r\n                    currency_code: 'GBP',\r\n                    value: props.amount\r\n                }\r\n            }\r\n        ]\r\n    })\r\n\r\n    const onApprove = (data, actions) => actions.order\r\n        .capture()\r\n        .then(details => props.onSuccess(data, details))\r\n        .catch(err => console.log(err));\r\n\r\n    useEffect(() => {\r\n        if(!window.paypal) {\r\n            addPaypalSdk();\r\n        }\r\n        return () => {\r\n            //\r\n        };\r\n    }, []);\r\n\r\n    if(!sdkReady) {\r\n        return <div>Loading...</div>\r\n    }\r\n\r\n    const Button = window.paypal.Buttons.driver('react', { React, ReactDOM });\r\n\r\n    return <Button {...props} createOrder={(data, actions) => createOrder(data, actions)}\r\n    onApprove={(data, actions) => onApprove(data, actions)} />\r\n}\r\n\r\nexport default PaypalButton;"]},"metadata":{},"sourceType":"module"}