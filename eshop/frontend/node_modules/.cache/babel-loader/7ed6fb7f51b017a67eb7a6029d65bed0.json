{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\bktes\\\\development\\\\eshop\\\\eshop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\bktes\\\\development\\\\eshop\\\\eshop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import Axios from\"axios\";import Cookie from'js-cookie';import{USER_SIGNIN_REQUEST,USER_SIGNIN_SUCCESS,USER_SIGNIN_FAIL}from\"../constants/userConstants\";import{USER_LOGOUT,USER_REGISTER_FAIL,USER_REGISTER_REQUEST,USER_REGISTER_SUCCESS}from\"../constants/userConstants\";import{USER_UPDATE_REQUEST,USER_UPDATE_SUCCESS,USER_UPDATE_FAIL}from\"../constants/userConstants\";// const { default: Axios } = require(\"axios\");\nvar signin=function signin(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var _yield$Axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch({type:USER_SIGNIN_REQUEST,payload:{email:email,password:password}});_context.prev=1;_context.next=4;return Axios.post(\"/api/users/signin\",{email:email,password:password});case 4:_yield$Axios$post=_context.sent;data=_yield$Axios$post.data;dispatch({type:USER_SIGNIN_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);dispatch({type:USER_SIGNIN_FAIL,payload:_context.t0.message});case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,10]]);}));return function(_x){return _ref.apply(this,arguments);};}();};var update=function update(_ref2){var userId=_ref2.userId,name=_ref2.name,email=_ref2.email,password=_ref2.password;return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var _getState,userInfo,_yield$Axios$put,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_getState=getState(),userInfo=_getState.userSignin.userInfo;dispatch({type:USER_UPDATE_REQUEST,payload:{userId:userId,name:name,email:email,password:password}});_context2.prev=2;_context2.next=5;return Axios.put(\"/api/users/\"+userId,{name:name,email:email,password:password},{headers:{Authorization:'Bearer'+userInfo.token}});case 5:_yield$Axios$put=_context2.sent;data=_yield$Axios$put.data;dispatch({type:USER_UPDATE_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](2);dispatch({type:USER_UPDATE_FAIL,payload:_context2.t0.message});case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[2,11]]);}));return function(_x2,_x3){return _ref3.apply(this,arguments);};}();};var register=function register(name,email,password){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var _yield$Axios$post2,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch({type:USER_REGISTER_REQUEST,payload:{name:name,email:email,password:password}});_context3.prev=1;_context3.next=4;return Axios.post(\"/api/users/register\",{name:name,email:email,password:password});case 4:_yield$Axios$post2=_context3.sent;data=_yield$Axios$post2.data;dispatch({type:USER_REGISTER_SUCCESS,payload:data});Cookie.set('userInfo',JSON.stringify(data));_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](1);dispatch({type:USER_REGISTER_FAIL,payload:_context3.t0.message});case 13:case\"end\":return _context3.stop();}}},_callee3,null,[[1,10]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};var logout=function logout(){return function(dispatch){Cookie.remove(\"userInfo\");dispatch({type:USER_LOGOUT});};};export{signin,register,logout,update};","map":{"version":3,"sources":["C:/Users/bktes/development/eshop/eshop/frontend/src/actions/userActions.js"],"names":["Axios","Cookie","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","USER_SIGNIN_FAIL","USER_LOGOUT","USER_REGISTER_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_UPDATE_REQUEST","USER_UPDATE_SUCCESS","USER_UPDATE_FAIL","signin","email","password","dispatch","type","payload","post","data","set","JSON","stringify","message","update","userId","name","getState","userInfo","userSignin","put","headers","Authorization","token","register","logout","remove"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\r\nimport Cookie from 'js-cookie';\r\nimport { USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS, USER_SIGNIN_FAIL } from \"../constants/userConstants\";\r\nimport { USER_LOGOUT, USER_REGISTER_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS } from \"../constants/userConstants\";\r\nimport { USER_UPDATE_REQUEST, USER_UPDATE_SUCCESS, USER_UPDATE_FAIL } from \"../constants/userConstants\";\r\n\r\n// const { default: Axios } = require(\"axios\");\r\n\r\nconst signin = (email, password) => async (dispatch) => {\r\n    dispatch({ type: USER_SIGNIN_REQUEST, payload: { email, password }});\r\n    try {\r\n        const { data } = await Axios.post(\"/api/users/signin\", { email, password });\r\n        dispatch({ type: USER_SIGNIN_SUCCESS, payload: data });\r\n        Cookie.set('userInfo', JSON.stringify(data));\r\n    } catch (error) {\r\n        dispatch({ type: USER_SIGNIN_FAIL, payload: error.message });\r\n    }\r\n}\r\n\r\nconst update = ({ userId, name, email, password }) => async (dispatch, getState) => {\r\n    const { userSignin: { userInfo } } = getState();\r\n    dispatch({ type: USER_UPDATE_REQUEST, payload: { userId, name, email, password }});\r\n    try {\r\n        const { data } = await Axios.put(\"/api/users/\" + userId,\r\n         { name, email, password }, { \r\n             headers: {\r\n                Authorization: 'Bearer' + userInfo.token\r\n            }\r\n        });\r\n        dispatch({ type: USER_UPDATE_SUCCESS, payload: data });\r\n        Cookie.set('userInfo', JSON.stringify(data));\r\n        } catch (error) {\r\n        dispatch({ type: USER_UPDATE_FAIL, payload: error.message });\r\n    }\r\n}\r\n\r\nconst register = (name,email, password) => async (dispatch) => {\r\n    dispatch({ type: USER_REGISTER_REQUEST, payload: { name, email, password }});\r\n    try {\r\n        const { data } = await Axios.post(\"/api/users/register\", { name, email, password });\r\n        dispatch({ type: USER_REGISTER_SUCCESS, payload: data });\r\n        Cookie.set('userInfo', JSON.stringify(data));\r\n    } catch (error) {\r\n        dispatch({ type: USER_REGISTER_FAIL, payload: error.message });\r\n    }\r\n}\r\n\r\nconst logout = () => (dispatch) => {\r\n    Cookie.remove(\"userInfo\");\r\n    dispatch({ type:USER_LOGOUT })\r\n}\r\n\r\nexport { signin, register, logout, update };"]},"metadata":{},"sourceType":"module"}