{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\bktes\\\\development\\\\eshop\\\\eshop\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import{listMyOrders}from'../actions/orderActions';import{logout,update}from'../actions/userActions';function ProfileScreen(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var dispatch=useDispatch();var userSignIn=useSelector(function(state){return state.userSignin;});var userInfo=userSignIn.userInfo;var handleLogout=function handleLogout(){dispatch(logout());props.history.push(\"/signin\");};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(update({userId:userInfo._id,email:email,name:name,password:password}));};var userUpdate=useSelector(function(state){return state.userUpdate;});var loading=userUpdate.loading,success=userUpdate.success,error=userUpdate.error;var myOrderList=useSelector(function(state){return state.myOrderList;});var loadingOrders=myOrderList.loading,orders=myOrderList.orders,errorOrders=myOrderList.error;useEffect(function(){if(userInfo){setName(userInfo.name);setEmail(userInfo.email);setPassword(userInfo.password);}dispatch(listMyOrders());return function(){};},[dispatch,userInfo]);return/*#__PURE__*/React.createElement(\"div\",{className:\"profile\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile-info\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:submitHandler},/*#__PURE__*/React.createElement(\"ul\",{className:\"form-container\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"User Profile \")),/*#__PURE__*/React.createElement(\"li\",null,loading&&/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"),error&&/*#__PURE__*/React.createElement(\"div\",null,error),success&&/*#__PURE__*/React.createElement(\"div\",null,\"Profile Saved\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"name\"},\"Name\"),/*#__PURE__*/React.createElement(\"input\",{value:name,type:\"name\",name:\"name\",id:\"name\",onChange:function onChange(e){return setName(e.target.value);}})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"email\"},\"Email\"),/*#__PURE__*/React.createElement(\"input\",{value:email,type:\"email\",name:\"email\",id:\"email\",onChange:function onChange(e){return setEmail(e.target.value);}})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"password\"},\"Password\"),/*#__PURE__*/React.createElement(\"input\",{value:password,type:\"password\",name:\"password\",id:\"password\",onChange:function onChange(e){return setPassword(e.target.value);}})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"button-primary\"},\"Update\")),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:handleLogout,className:\"button full-width\"},\"Logout\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile-orders content-margined\"},loadingOrders?/*#__PURE__*/React.createElement(\"div\",null,\"Loading...\"):errorOrders?/*#__PURE__*/React.createElement(\"div\",null,errorOrders,\" \"):/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"DATE\"),/*#__PURE__*/React.createElement(\"th\",null,\"TOTAL\"),/*#__PURE__*/React.createElement(\"th\",null,\"PAID\"),/*#__PURE__*/React.createElement(\"th\",null,\"ACTIONS\"))),/*#__PURE__*/React.createElement(\"tbody\",null,orders.map(function(order){return/*#__PURE__*/React.createElement(\"tr\",{key:order._id},/*#__PURE__*/React.createElement(\"td\",null,order._id),/*#__PURE__*/React.createElement(\"td\",null,order.createdAt),/*#__PURE__*/React.createElement(\"td\",null,\"\\xA3\",order.totalPrice),/*#__PURE__*/React.createElement(\"td\",null,order.isPaid),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(Link,{to:\"/order/\"+order._id,className:\"button\"},\"DETAILS\")));})))));}export default ProfileScreen;","map":{"version":3,"sources":["C:/Users/bktes/development/eshop/eshop/frontend/src/Screens/ProfileScreen.js"],"names":["React","useEffect","useState","useDispatch","useSelector","Link","listMyOrders","logout","update","ProfileScreen","props","name","setName","email","setEmail","password","setPassword","dispatch","userSignIn","state","userSignin","userInfo","handleLogout","history","push","submitHandler","e","preventDefault","userId","_id","userUpdate","loading","success","error","myOrderList","loadingOrders","orders","errorOrders","target","value","map","order","createdAt","totalPrice","isPaid"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { listMyOrders } from '../actions/orderActions';\r\nimport { logout, update } from '../actions/userActions';\r\n\r\nfunction ProfileScreen(props) {\r\n\r\n    const [name, setName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const userSignIn = useSelector(state => state.userSignin);\r\n    const { userInfo } = userSignIn;\r\n\r\n    const handleLogout = () => {\r\n        dispatch(logout());\r\n        props.history.push(\"/signin\");\r\n    }\r\n\r\n    const submitHandler = (e) => {\r\n        e.preventDefault();\r\n        dispatch(update({ userId: userInfo._id, email, name, password }))\r\n    }\r\n\r\n    const userUpdate = useSelector(state => state.userUpdate);\r\n    const { loading, success, error } = userUpdate;\r\n\r\n    const myOrderList = useSelector(state => state.myOrderList);\r\n    const { loading: loadingOrders, orders, error: errorOrders} = myOrderList;\r\n\r\n    useEffect(() => {\r\n        if(userInfo){\r\n            setName(userInfo.name);\r\n            setEmail(userInfo.email);\r\n            setPassword(userInfo.password);\r\n        }\r\n        dispatch(listMyOrders());\r\n        return () => {\r\n            \r\n        };  \r\n    }, [dispatch, userInfo])\r\n\r\n    return <div className=\"profile\">\r\n        <div className=\"profile-info\">\r\n            <div className=\"form\">\r\n                <form onSubmit={submitHandler} >\r\n                    <ul className=\"form-container\">\r\n                        <li>\r\n                            <h2>User Profile </h2>\r\n                        </li>\r\n                        <li>\r\n                            {loading && <div>Loading...</div>}\r\n                            {error && <div>{error}</div>}\r\n                            {success && <div>Profile Saved</div>}\r\n                        </li>\r\n                        <li>\r\n                                <label htmlFor=\"name\">Name</label>\r\n                                <input value={name} type=\"name\" name=\"name\" id=\"name\" onChange={(e) => setName(e.target.value)}>\r\n                                </input>\r\n                        </li>\r\n                        <li>\r\n                                <label htmlFor=\"email\">Email</label>\r\n                                <input value={email} type=\"email\" name=\"email\" id=\"email\" onChange={(e) => setEmail(e.target.value)}>\r\n                                </input>\r\n                        </li>\r\n                        <li>\r\n                                <label htmlFor=\"password\">Password</label>\r\n                                <input value={password} type=\"password\" name=\"password\" id=\"password\" onChange={(e) => setPassword(e.target.value)}>\r\n                                </input>\r\n                        </li>\r\n                        <li>\r\n                            <button type=\"submit\" className=\"button-primary\">Update</button>\r\n                        </li>\r\n                        <li>\r\n                            <button type=\"button\" onClick={handleLogout} className=\"button full-width\">Logout</button>\r\n                        </li>\r\n                    </ul>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div className=\"profile-orders content-margined\">\r\n      {\r\n        loadingOrders ? <div>Loading...</div> :\r\n          errorOrders ? <div>{errorOrders} </div> :\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>DATE</th>\r\n                  <th>TOTAL</th>\r\n                  <th>PAID</th>\r\n                  <th>ACTIONS</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {orders.map(order => <tr key={order._id}>\r\n                  <td>{order._id}</td>\r\n                  <td>{order.createdAt}</td>\r\n                  <td>£{order.totalPrice}</td>\r\n                  <td>{order.isPaid}</td>\r\n                  <td>\r\n                    <Link to={\"/order/\" + order._id} className=\"button\">DETAILS</Link>\r\n                  </td>\r\n                </tr>)}\r\n              </tbody>\r\n            </table>\r\n      }\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default ProfileScreen;"]},"metadata":{},"sourceType":"module"}